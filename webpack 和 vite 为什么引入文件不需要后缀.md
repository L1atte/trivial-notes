# webpack 和 vite 为什么引入文件不需要后缀

- ## webpack

  Webpack 在引入文件时，如果没有指定文件后缀，会根据一定的规则自动解析文件后缀。这个规则可以在 Webpack 配置文件中的 resolve.extensions 属性中进行配置。

  默认情况下，Webpack 会按照以下顺序自动解析文件后缀：

  1. .js（JavaScript 文件）
  2. .json（JSON 文件）
  3. .wasm（WebAssembly 文件）

  如果在 resolve.extensions 属性中添加了其他后缀，Webpack 会按照添加的顺序依次解析。

  例如，如果配置了 resolve.extensions: ['.js', '.jsx']，那么在 import 语句中引入文件时，可以省略文件后缀，Webpack 会先按照 .js 后缀查找，如果找不到再按照 .jsx 后缀查找。

  需要注意的是，如果两个文件名相同但后缀不同的文件同时存在，Webpack 会优先解析后缀靠前的文件。因此，如果需要引入一个具有相同文件名但不同后缀的文件，最好在 import 语句中指定完整的文件名，以避免不必要的错误。

- ## vite

  Vite 和 Webpack 一样，也支持在引入文件时省略文件后缀。不过它们的实现方式有所不同。

  Vite 是基于浏览器原生的 ES 模块加载机制实现的，因此它可以直接利用浏览器的模块解析规则。浏览器中的模块解析规则是按照以下顺序进行的：

  1. 如果文件路径以 "/"、"./" 或 "../" 开头，则按照相对路径解析。
  2. 如果文件路径不以 "/"、"./" 或 "../" 开头，则按照绝对路径解析。

  在按照相对路径解析时，浏览器会自动在文件名后面加上以下文件后缀依次查找：

  1. .js
  2. .mjs
  3. /index.js
  4. /index.mjs

  因此，在 Vite 中，如果没有指定文件后缀，Vite 会按照浏览器的模块解析规则自动解析文件后缀。

  需要注意的是，在使用 Vite 开发时，由于 Vite 会在后台动态生成一个服务，因此对于一些不支持 ES 模块的浏览器，需要在 script 标签中添加 type="module-shim" 属性，以支持 ES 模块的加载。此时，浏览器的模块解析规则可能与 ES 模块规范不完全一致，因此建议在开发时尽量指定文件后缀，以避免不必要的错误。